---
title: "Analysis Joined"
output: html_document
date: "2025-11-23"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


 Cleaning and joining pollinator data 
 
```{r cars}
install.packages("bipartite")
library(bipartite)
library(dplyr)
library(tidyr)
veg <- read.csv("/Users/sydneyjames/OneDrive_UniversityofOregon/final_community_assembly-SJIN/data/veg.csv")
ints <- read.csv("/Users/sydneyjames/OneDrive_UniversityofOregon/final_community_assembly-SJIN/data/Holiday_PP_Interaction.csv")
#veg <- read.csv("/Users/isabellenollette/Desktop/final_community_assembly-SJIN/data/veg.csv")
#ints <- read.csv("/Users/isabellenollette/Desktop/final_community_assembly-SJIN/data/Holiday_PP_Interaction.csv")

veg_data <- veg %>%
  separate(col = Stand, into = c("Stand", "Loc"), sep = ":") %>%
  subset(Stand = c("604","605","607","611","700","702","704","705")) %>%
  subset(Site == 6) %>%
  subset(Transect != "Unenhanced") %>%
  subset(select = c("Stand", "Date", "Transect", "PlantGenusSpecies"))

ints1 <- ints %>%
  filter(Year == 2024) %>%
  separate(col = Stand, into = c("Year1", "Stand"), sep = "_") %>%
  separate(col = Stand, into = c("Stand", "Site"), sep = ":") %>%
  filter(Stand == "604" | Stand == "605" | Stand == "607" | Stand == "611" | Stand == "700" | Stand ==     "702" | Stand == "704" | Stand == "705")
  #subset(Stand = c("604","605","607","611","700","702","704","705"))

both_data <- ints1 %>%
  inner_join(veg_data, by = "Stand", relationship = "many-to-many") %>%
  subset(select = -c(X, Year1, Site, Year, DoyStart)) %>%
  rename("Pollinator" = GenusSpecies) 



both_data$PlantGenusSpecies.x <- NULL

Stand_df <- split(both_data, both_data$Stand, drop = FALSE)

`604` <- as.data.frame(Stand_df$`604`)
`605` <- as.data.frame(Stand_df$`605`)
`607` <- as.data.frame(Stand_df$`607`)
`611` <- as.data.frame(Stand_df$`611`)
`700` <- as.data.frame(Stand_df$`700`)
`702` <- as.data.frame(Stand_df$`702`)
`704` <- as.data.frame(Stand_df$`704`)
`705` <- as.data.frame(Stand_df$`705`)


# for(i in 1:nrow(Stand_df)){
#   Stand.no <- split(i, i$Transect, drop = FALSE)
#   list[i] <- print(paste(Stand.no, Transect))
# }

# str(veg)
# unique(veg$Stand)
# Hstands <- paste(c("604","605","607","611","700","702","704","705"),"Holiday",sep=":")
# veg <- veg[veg$Stand%in%Hstands,]
# table(veg$PlantGenusSpecies, veg$Site)
# veg <- veg[veg$Site==6,]

# str(ints)
# unique(ints$Stand)
# Hstands24 <- paste("2024",Hstands,sep="_")
# ints <- ints[ints$Stand%in%Hstands24,]
# head(ints)
# unique(ints$PlantGenusSpecies)

# new_poll <- ints %>%
#   separate(col = Stand, into = c("Year1", "Stand"), sep = "_") %>%
#   separate(col = Stand, into = c("Stand", "Site"), sep = ":") %>%
#   subset(select = -c(X, Year1, Site, Year, DoyStart))

AllData <- read.csv("/Users/sydneyjames/OneDrive_UniversityofOregon/final_community_assembly-SJIN/data/All_Cleaned_Data")
AllData <- read.csv("/Users/isabellenollette/Desktop/final_community_assembly-SJIN/data/All_Cleaned_Data")
AllData <- AllData[, -1]

new_poll$Stand <- as.numeric(new_poll$Stand)
AllData$Stand <- as.numeric(AllData$Stand)


```

