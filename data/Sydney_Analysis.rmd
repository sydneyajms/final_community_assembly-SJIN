---
title: "Analysis Joined"
output: html_document
date: "2025-11-23"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


 Cleaning and joining pollinator data 
 
```{r cars}
install.packages("bipartite")
library(bipartite)
library(dplyr)
library(tidyr)
veg <- read.csv("/Users/sydneyjames/OneDrive_UniversityofOregon/final_community_assembly-SJIN/data/veg.csv")
ints <- read.csv("/Users/sydneyjames/OneDrive_UniversityofOregon/final_community_assembly-SJIN/data/Holiday_PP_Interaction.csv")
#veg <- read.csv("/Users/isabellenollette/Desktop/final_community_assembly-SJIN/data/veg.csv")
#ints <- read.csv("/Users/isabellenollette/Desktop/final_community_assembly-SJIN/data/Holiday_PP_Interaction.csv")

veg_data <- veg %>%
  separate(col = Stand, into = c("Stand", "Loc"), sep = ":") %>%
  subset(Stand = c("604","605","607","611","700","702","704","705")) %>%
  subset(Site == 6) %>%
  subset(Transect != "Unenhanced") %>%
  subset(select = c("Stand", "Date", "Transect", "PlantGenusSpecies"))

ints1 <- ints %>%
  filter(Year == 2024) %>%
  separate(col = Stand, into = c("Year1", "Stand"), sep = "_") %>%
  separate(col = Stand, into = c("Stand", "Site"), sep = ":") %>%
  filter(Stand == "604" | Stand == "605" | Stand == "607" | Stand == "611" | Stand == "700" | Stand ==     "702" | Stand == "704" | Stand == "705")
  #subset(Stand = c("604","605","607","611","700","702","704","705"))

both_data1 <- ints1 %>%
  inner_join(veg_data, by = "Stand", relationship = "many-to-many") %>%
  subset(select = -c(X, Year1, Site, Year, DoyStart)) %>%
  rename("Pollinator" = GenusSpecies) 


#Remove extra plant data 
both_data$PlantGenusSpecies.x <- NULL
#Filter into only 3 sampling rounds (1 per month): 5/23/24, 6/20/24 and 7/22/24 and 
both_data <- both_data1 %>%
  filter(Date == "6/20/24" | Date == "7/22/24" | Date == "5/23/24")
  
#Split all data into stand
Stand_df <- split(both_data, both_data$Stand, drop = FALSE)

`604` <- as.data.frame(Stand_df$`604`)
`700` <- as.data.frame(Stand_df$`700`)
`702` <- as.data.frame(Stand_df$`702`)


AllData <- read.csv("/Users/sydneyjames/OneDrive_UniversityofOregon/final_community_assembly-SJIN/data/All_Cleaned_Data")
AllData <- read.csv("/Users/isabellenollette/Desktop/final_community_assembly-SJIN/data/All_Cleaned_Data")
AllData <- AllData[, -1]


```

