---
title: "Sydney_data_cleanup"
output: html_document
date: "2025-11-18"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(tidyr)
```

Clean up MICGRA (DONE)

```{r cars}
## Read in CSV file
MICGRA1 <- read.csv("/Users/sydneyjames/OneDrive_UniversityofOregon/final_community_assembly-SJIN/data/ MICGRA.csv")

## remove unuseful columns
MICGRA <- subset(MICGRA1, select = -c(S, Herbivory, X, Herbivory.1, X.1, ONotes, CNotes, Opods, Cpods))
 
## remove mono plots 
MICGRA <- subset(MICGRA, M != 0)

## turn any blooms = 0 into NAs 
MICGRA$Oblooms[MICGRA$Oblooms == 0] <- NA
MICGRA$Cblooms[MICGRA$Cblooms == 0] <- NA

## remove any NAs 
MICGRA <- MICGRA %>%
  drop_na(Oseeds, Oblooms, Cseeds, Cblooms)

## find seeds per bloom and add column 
MICGRA <- MICGRA %>%
  mutate(OSeeds_Per_bloom = round(Oseeds/Oblooms, digits = 2)) %>%
  mutate(CSeeds_Per_bloom = round(Cseeds/Cblooms, digits = 2))

## rename columns to match pollinator data
MICGRA <- MICGRA %>%
  rename("Stand" = St, 
          "Seed_Mix" = M,
          "Treatment" = genSpec,
          "PlantGenusSpecies" = Sp)  

```

Clean up GILCAP (DONE)

```{r}
GILCAP1 <- read.csv("/Users/sydneyjames/OneDrive_UniversityofOregon/final_community_assembly-SJIN/data/GILCAP.csv")

## remove unuseful columns
GILCAP <- subset(GILCAP1, select = -c(S, Herbivory, OflwrsGood, OflwrsBad, OseedsBad, OseedsGood, Omass, Herbivory.1, CflwrsGood, CflwrsBad, CseedsBad, CseedsGood, Cmass, notesOpen, notesClosed, Opods, Cpods, X))
 
## remove mono plots 
GILCAP <- subset(GILCAP, M != 0)

## turn any blooms = 0 into NAs 
GILCAP$Oblooms[GILCAP$Oblooms == 0] <- NA
GILCAP$Cblooms[GILCAP$Cblooms == 0] <- NA

## remove any NAs 
GILCAP <- GILCAP %>%
  drop_na(OseedsTotal, Oblooms, CseedsTotal, Cblooms)

## find seeds per bloom and add column 
GILCAP <- GILCAP %>%
  mutate(OSeeds_Per_bloom = round(OseedsTotal/Oblooms, digits = 2)) %>%
  mutate(CSeeds_Per_bloom = round(CseedsTotal/Cblooms, digits = 2))

## rename columns to match pollinator data
GILCAP <- GILCAP %>%
  rename("Stand" = St, 
          "Seed_Mix" = M,
          "Treatment" = genSpec,
          "PlantGenusSpecies" = Sp)  

```

Clean up GLTCCLAAMO - Need mass

```{r}
GLTC_CLAAMO1 <- read.csv("/Users/sydneyjames/OneDrive_UniversityofOregon/final_community_assembly-SJIN/data/GLTCCLAAMO.csv")

## turn any blooms = 0 into NAs 
GLTC_CLAAMO1$Oblooms[GLTC_CLAAMO1$Oblooms == 0] <- NA
GLTC_CLAAMO1$Cblooms[GLTC_CLAAMO1$Cblooms == 0] <- NA
 ## initial drop any NA blooms 
GLTC_CLAAMO1 <- GLTC_CLAAMO1 %>%
  drop_na(Oblooms, Cblooms)
## remove mono plots 
GLTC_CLAAMO1 <- subset(GLTC_CLAAMO1, M != 0)

GLTC_CLAAMO1 <- cbind(GLTC_CLAAMO1, row = 1:nrow(GLTC_CLAAMO1))

##Linerar regression for Open seed mass:
## subset for data rows that have both total seeds and mass:
OSeed_mass <- subset(GLTC_CLAAMO1, OseedsTotal !=0 & Omass != 0)
## linear reg:
model <- lm(OSeed_mass$OseedsTotal~OSeed_mass$Omass)
b <- model$coefficients[1]
m <- model$coefficients[2]

##subset data to get rows that have mass but dont have seeds
OnoSeeds_yesMass <- subset(GLTC_CLAAMO1, OseedsTotal == 0 | is.na(OseedsTotal) & Omass != 0)

## get the mass column for the regression
x <- OnoSeeds_yesMass$Omass
y <- m*x+b

##fill in empty rows 
OnoSeeds_yesMass$OseedsTotal <- y 

##Linerar regression for Open seed mass:
## subset for data rows that have both total seeds and mass:
CSeed_mass <- subset(GLTC_CLAAMO1, CseedsTotal !=0 & Cmass != 0)

## linear reg:
model <- lm(CSeed_mass$CseedsTotal~CSeed_mass$Cmass)
Cb <- model$coefficients[1]
Cm <- model$coefficients[2]

##subset data to get rows that have mass but dont have seeds
CnoSeeds_yesMass <- subset(GLTC_CLAAMO1, CseedsTotal == 0 | is.na(CseedsTotal) & Cmass != 0)
## get the mass column for the regression
Cx <- CnoSeeds_yesMass$Cmass
Cy <- Cm*Cx+Cb

##fill in empty rows
CnoSeeds_yesMass$CseedsTotal <- Cy

##MAKE A FOR LOOP

## remove any NAs 
GLTC_CLAAMO <- GLTC_CLAAMO %>%
  drop_na(OseedsTotal, CseedsTotal)

## find seeds per bloom and add column 
GLTC_CLAAMO <- GLTC_CLAAMO %>%
  mutate(OSeeds_Per_bloom = round(OseedsTotal/Oblooms, digits = 2)) %>%
  mutate(CSeeds_Per_bloom = round(CseedsTotal/Cblooms, digits = 2))

## remove unuseful columns
GLTC_CLAAMO <- subset(GLTC_CLAAMO, select = -c(S, OseedsGood, Oblooms, OseedsBad, Cblooms, CseedsGood, CseedsBad, Omass, Cmass, notesOpen, notesClosed))



```

clean up GLTCCLAPUR - Need Mass

```{r}
GLTCCLAPUR1 <- read.csv("/Users/sydneyjames/OneDrive_UniversityofOregon/final_community_assembly-SJIN/data/GLTCCLAPUR.csv")

## turn any blooms = 0 into NAs 
GLTCCLAPUR1$Oblooms[GLTCCLAPUR1$Oblooms == 0] <- NA
GLTCCLAPUR1$Cblooms[GLTCCLAPUR1$Cblooms == 0] <- NA
 ## initial drop any NA blooms 
GLTCCLAPUR1 <- GLTCCLAPUR1 %>%
  drop_na(Oblooms, Cblooms)
## remove mono plots 
GLTCCLAPUR1 <- subset(GLTCCLAPUR1, M != 0)

##Linerar regression for Open seed mass:
## subset for data rows that have both total seeds and mass:
OSeed_mass <- subset(GLTCCLAPUR1, OseedsTotal !=0 & Omass != 0)
## linear reg:
model <- lm(OSeed_mass$OseedsTotal~OSeed_mass$Omass)
b <- model$coefficients[1]
m <- model$coefficients[2]

##subset data to get rows that have mass but dont have seeds
OnoSeeds_yesMass <- subset(GLTCCLAPUR1, OseedsTotal == 0 | is.na(OseedsTotal) & Omass != 0)

## get the mass column for the regression
x <- OnoSeeds_yesMass$Omass
y <- m*x+b

##fill in empty rows 
OnoSeeds_yesMass$OseedsTotal <- y 

##Linerar regression for Cpen seed mass:
## subset for data rows that have both total seeds and mass:
CSeed_mass <- subset(GLTCCLAPUR1, CseedsTotal !=0 & Cmass != 0)

## linear reg:
model <- lm(CSeed_mass$CseedsTotal~CSeed_mass$Cmass)
Cb <- model$coefficients[1]
Cm <- model$coefficients[2]

##subset data to get rows that have mass but dont have seeds
CnoSeeds_yesMass <- subset(GLTCCLAPUR1, CseedsTotal == 0 | is.na(CseedsTotal) & Cmass != 0)
## get the mass column for the regression
Cx <- CnoSeeds_yesMass$Cmass
Cy <- Cm*Cx+Cb

##fill in empty rows
CnoSeeds_yesMass$OseedsTotal <- Cy

## MAKE FOR LOOP

## remove any NAs 
GLTCCLAPUR <- GLTCCLAPUR %>%
  drop_na(OseedsTotal, CseedsTotal)

## find seeds per bloom and add column 
GLTCCLAPUR <- GLTCCLAPUR %>%
  mutate(OSeeds_Per_bloom = round(OseedsTotal/Oblooms, digits = 2)) %>%
  mutate(CSeeds_Per_bloom = round(CseedsTotal/Cblooms, digits = 2))

## remove unuseful columns
GLTCCLAPUR <- subset(GLTCCLAPUR, select = -c(S, OseedsGood, Oblooms, OseedsBad, Cblooms, CseedsGood, CseedsBad, Omass, Cmass, notesOpen, notesClosed))
```

GLTCCOLLIGRA (DONE)

```{r}
GLTCCOLLIGRA1 <- read.csv("/Users/sydneyjames/OneDrive_UniversityofOregon/final_community_assembly-SJIN/data/GLTCCOLLIGRA.csv")

## remove unuseful columns
GLTCCOLLIGRA <- subset(GLTCCOLLIGRA1, select = -c(S, OseedsGood, OseedsBad, Ocomplete., OemptyInflorMass, CseedsGood, CseedsBad, Ccomplete., CemptyInflorMass, notesOpen, notesClosed, X, X.1, X.2, X.3, X.4, X.5))
 
## remove mono plots 
GLTCCOLLIGRA <- subset(GLTCCOLLIGRA, M != 0)

## turn any blooms = 0 into NAs 
GLTCCOLLIGRA$Oblooms[GLTCCOLLIGRA$Oblooms == 0] <- NA
GLTCCOLLIGRA$Cblooms[GLTCCOLLIGRA$Cblooms == 0] <- NA

## remove any NAs 
GLTCCOLLIGRA <- GLTCCOLLIGRA %>%
  drop_na(OseedsTotal, Oblooms, CseedsTotal, Cblooms)

## find seeds per bloom and add column 
GLTCCOLLIGRA <- GLTCCOLLIGRA %>%
  mutate(OSeeds_Per_bloom = round(OseedsTotal/Oblooms, digits = 2)) %>%
  mutate(CSeeds_Per_bloom = round(CseedsTotal/Cblooms, digits = 2))

## rename columns to match pollinator data
GLTCCOLLIGRA <- GLTCCOLLIGRA %>%
  rename("Stand" = St, 
          "Seed_Mix" = M,
          "Treatment" = genSpec,
          "PlantGenusSpecies" = Sp)  

```

